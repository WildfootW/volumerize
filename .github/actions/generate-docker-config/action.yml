name: Generate Docker Config
description: Generate Docker configuration for Volumerize
inputs:
  docker-tags:
    description: Tags generated by the docker extract metadata action
    required: true
  prepost-strategies:
    description: prepost strategies for the container being built
    required: true
  unique-id:
    description: A string uniquely identifying the pipeline run
    required: true
    default: ${{ github.run_number }}-${{ github.run_attempt }}-${{ github.run_id }}

outputs:
  tags:
    description: Tags that should be used when publishing the docker image
  primary_tag:
    description: A tag that should be used by downstream jobs to access the container that was built
  context:
    description: The context that should be used to build the docker container

runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.docker-tags }}
    - ${{ inputs.prepost-strategies }}
    - ${{ inputs.unique-id }}